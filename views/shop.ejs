<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        :root {
          --surface-color: #fff;
          --curve: 40;
        }
        
        * {
          box-sizing: border-box;
        }
        
        body {
          font-family: 'Noto Sans JP', sans-serif;
          background-color: #fef8f8;
        }
        
        .cards {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          padding: 0;
          list-style-type: none;
          width: 100%; /* Keep this to ensure full width */
        }
        
        .card {
          position: relative;
          display: flex;
          flex-direction: column;
          height: 300px;
          border-radius: calc(var(--curve) * 1px); /* Keep original border radius */
          overflow: hidden;
          text-decoration: none;
          background-color: white;
          width: 265px; /* Keep this fixed width for consistent sizing */
          box-shadow: 10px 4px 10px 4px #6A515E; /* Adjust shadow color and intensity */
        }
        
        .card__image {
          margin-top: 6%;
          width: 100%;
          height: 200px;
          object-fit: contain;
        }
        
        .card__overlay {
          position: absolute;
          bottom: 0;
          left: 0;
          right: 0;
          z-index: 1;
          background-color: var(--surface-color);
          transform: translateY(100%);
          transition: transform 0.3s ease-in-out, background-color 0.3s ease-in-out;
          background-color: #6A515E;
        }
        
        .card__header {
          position: relative;
          display: flex;
          align-items: center;
          gap: 2em;
          padding: 0.5em;
          border-radius: calc(var(--curve) * 1px) 0 0 0; /* Keep original border radius */
          background-color: var(--surface-color);
          transform: translateY(-100%);
          transition: transform 0.3s ease-in-out, background-color 0.3s ease-in-out;
          background-color: #6A515E;
        }
        
        .card__thumb {
          flex-shrink: 0;
          width: 50px;
          height: 50px;
          border-radius: 50%;
        }
        
        .card__title {
          font-size: 0.9em;
          margin: 0 0 0.3em;
          color: #D7BDCA;
          font-weight:bold;
        }
        
        .card__tagline {
          display: block;
          margin: 1em 0;
          font-family: "MockFlowFont";
          font-size: 1em;
          color: #D7BDCA;
          font-weight:bold;
        }
        
        .card__status {
          font-size: 0.8em;
          color: #D7BDCA;
          font-weight:bold;
        }
        
        .card__description {
          padding: 0px 0px 0px 0px;
          margin-left: 50px;
          color: #D7BDCA;
          font-family: "MockFlowFont";
          display: -webkit-box;
          -webkit-box-orient: vertical;
          -webkit-line-clamp: 3;
          font-weight: bold;
          /* margin-bottom: 10px; */
        }
        
        .card__description button {
          color: #D7BDCA;
          font-family: "MockFlowFont";
          display: -webkit-box;
          -webkit-box-orient: vertical;
          -webkit-line-clamp: 3;
          font-weight: bold;       
          margin-bottom: 20px; 
        }
        
        .card:hover .card__overlay,
        .card:hover .card__header {
          transform: translateY(0);
        }
          
        @media (max-width: 768px) {
    /* Adjust the sidebar width and card layout for tablets */
    .w-[16%] {
        width: 100%; /* Full width on smaller screens */
        position: relative; /* Make it flow with the content */
    }
    .w-[80%] {
        width: 100%; /* Full width on smaller screens */
        margin-left: 0; /* Reset margin for full width */
    }
    .cards {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); /* Smaller cards for mobile */
    }
}

@media (max-width: 480px) {
    /* Adjust text sizes and padding for mobile phones */
    .text-lg {
        font-size: 1.25rem; /* Adjust category header size */
    }
    .text-md {
        font-size: 1rem; /* Adjust shop sections size */
    }
    .card__title {
        font-size: 1em; /* Slightly smaller title */
    }
    .card__description {
        font-size: 0.8em; /* Smaller description */
        margin-left: 10px; /* Adjust margin */
    }
}

        
        </style>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet" />
    <!-- <link rel="stylesheet" href="/views/public/stylesheets/shop.css">  -->
  
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="font-['Poppins']" style="background-color: #D7BDCA;">
    <nav class="w-full flex justify-between items-center px-5 py-4 fixed top-0 left-0 bg-white shadow-md z-10">
        <h3 class="mx-32 text-2xl font-semibold hover:text-gray-600 transition duration-100">Nile</h3>
        <% var loggedin = typeof loggedin !== "undefined" ? loggedin : true %>

        <% if(loggedin){  %>

            <div class="flex gap-5">
                <a href="/shop" class="font-semibold hover:text-gray-600 transition duration-100">Shop</a>
                <a href="/cart" class="font-semibold hover:text-gray-600 transition duration-100">Cart</a>
                
                <a href="/users/logout" class="font-semibold text-red-600 hover:text-red-700 transition duration-100">Logout</a>
            </div>

        <%  }  %>
    </nav>

    <!-- Main content section to allow scrolling -->
    <div class="mt-16"> <!-- Add margin-top to push the content below the fixed header -->
        <!-- Your content goes here -->
    </div>

</body>

</html>



<!-- Success Message -->
<% if(success.length) { %>
<div
  id="success-message"
  class="absolute top-50 left-1/2 -translate-x-1/2 -translate-y-1/2 p-3 rounded-full bg-green-500 z-20"
>
  <span class="inline-block mt-1 mb-1 text-white"> <%= success %> </span>
</div>
<% } %>

<!-- Main Content Section -->
<div class="w-full h-screen flex ">
    <!-- Sidebar Section -->
    <!-- Sidebar Section -->
<div class="w-[16%] px-6 py-8 bg-[#624253] text-[#D7BDCA] flex-col items-start pr-4 fixed h-screen">
    <!-- Sidebar with background and shadow -->
    
    <!-- Category Section -->
    <div class="flex flex-col items-start gap-4 mb-10">
        <h3 class="text-lg font-semibold">Categories</h3>
        <form action="/shop" method="GET">
            <select class="border border-gray-300 rounded-md px-3 py-2 text-gray-600 w-full focus:outline-none focus:ring-2 focus:ring-indigo-500" name="category" onchange="this.form.submit()">
                <option value="" <%= !categoryName || categoryName === 'All' ? 'selected' : '' %>>All</option>
                <% categories.forEach(function(category) { %>
                    <option value="<%= category.catname %>" <%= category.catname === categoryName ? 'selected' : '' %>>
                        <%= category.catname %>
                    </option>
                <% }) %>
            </select>
        </form>
    </div>
  
    <!-- Navigation Links Section -->
    <div class="flex flex-col items-start gap-4 mb-10">
        <h4 class="text-md font-semibold">Shop Sections</h4>
        <a class="block hover:font-bold transition duration-150 ease-in-out" href="">New Collection</a>
        <a class="block hover:font-bold transition duration-150 ease-in-out" href="/shop">All Products</a>
        <a class="block hover:font-bold transition duration-150 ease-in-out" href="">Discounted Products</a>
    </div>
  
    <!-- Filter Section -->
    <div class="flex flex-col items-start gap-4">
        <h4 class="text-md font-semibold">Filters</h4>
        <a class="block hover:font-bold transition duration-150 ease-in-out" href="">Availability</a>
        <a class="block hover:font-bold transition duration-150 ease-in-out" href="">Discount</a>
    </div>
</div>
  
    <!-- Products Section -->
    <div class="w-[80%] ml-[18%] h-screen overflow-y-scroll pr-4">
        <!-- Allowing the main section to scroll -->
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5 h-full my-2">
          <% products.forEach(function(product) { %>
          <div class="w-full">
            <ul class="cards">
               
                  <div class="card">
                    <img src="data:image/jpeg;base64,<%= product.image.toString('base64') %>" class="card__image" alt="" />
                    <div class="card__overlay">
                      <div class="card__header">            
                        <img class="card__thumb" src="data:image/jpeg;base64,<%= product.image.toString('base64') %>" alt="" />
                        <div class="card__header-text">
                          <h3 class="card__title"><%= product.name %></h3>
                            
                          <span class="card__status">₹ <%= product.price %></span>
                        </div>
                      </div>
                      <p class="card__description ">Discount Available: <span class=" font-bold text-green-600">₹ <%= product.price - product.discount %></span> </p>
                      <p class="card__description flex justify-between items-center">
                        <span>Net Price: ₹ <%= product.discount %></span>
                        <p class="card__description flex justify-between items-center">
                            
                            <button class="relative px-2 py-1 text-sm font-bold text-gray-800 rounded-md mr-4 bg-[#D7BDCA] hover:scale-125 transition-all duration-200 ease-in-out flex items-center space-x-2 ml-20">
                                <a href="/addtocart/<%= product._id %>" class=" text-gray-800 flex flex-col items-center">
                                    <span class="plus-sign">+</span>
                                    <span class="add-to-cart hidden opacity-0 mt-1 transition-opacity duration-500 ease-in-out">Add to Cart</span>
                                </a>
                            </button>
                        </p>
                    </p>
                    </div>
                  </div>      
                
              </ul>

          </div>
          <% }) %>
        </div>
      </div>
  </div>

<script>
  // Hide success message after 2 seconds
  setTimeout(() => {
    const successMessage = document.getElementById("success-message");
    if (successMessage) {
      successMessage.style.display = "none";
    }
  }, 1200);
</script>

<%- include('./partials/footer') %>
